<main>
    <%- include('../partials/donorSidebar') %>

    <div id="main-wrapper">

        <!-- Header -->
        <div class="bg-white shadow-sm p-3">
            <span class="me-3" id="sidebar-toggler-btn">
                <i class="fas fa-bars"></i>
            </span>
            <h5 class="m-0 color-theme d-inline-block">Pending Donations</h5>
        </div>

        <div class="m-4">

            <% for(let i=0; i<pendingDonations.length; i++) { %>

                <div class="bg-white p-4 mb-4 rounded-3 shadow-sm border">

                    <!-- Food Type + Quantity -->
                    <div class="row mb-3">
                        <div class="col-sm-6 mb-2">
                            <label class="fw-semibold text-secondary">Food Type</label>
                            <div><%= pendingDonations[i].foodType %></div>
                        </div>
                        <div class="col-sm-6 mb-2">
                            <label class="fw-semibold text-secondary">Quantity</label>
                            <div><%= pendingDonations[i].quantity %></div>
                        </div>
                    </div>

                    <!-- Address + Phone -->
                    <div class="row mb-3">
                        <div class="col-sm-6 mb-2">
                            <label class="fw-semibold text-secondary">Address</label>
                            <div><%= pendingDonations[i].address %></div>
                        </div>
                        <div class="col-sm-6 mb-2">
                            <label class="fw-semibold text-secondary">Phone</label>
                            <div><%= pendingDonations[i].phone %></div>
                        </div>
                    </div>

                    <!-- Cooking Time -->
                    <div class="mb-3">
                        <label class="fw-semibold text-secondary">Cooking Time</label>
                        <div>
                            <%= pendingDonations[i].cookingTime.toLocaleString("en-IN", { 
                                dateStyle: "medium", 
                                timeStyle: "short"
                            }) %>
                        </div>
                    </div>

                    <!-- Status Section -->
                    <div class="mt-3">
                        <label class="fw-semibold text-secondary">Status</label>

                        <% if(pendingDonations[i].status == "pending") { %>
                            <div class="text-warning fw-semibold mt-1">
                                Your donation request hasn't been processed yet.
                            </div>

                        <% } else if(pendingDonations[i].status == "rejected") { %>
                            <div class="text-danger fw-semibold mt-1">
                                Your donation request has been rejected.
                            </div>

                        <% } else if(pendingDonations[i].status == "accepted") { %>
                            <div class="text-primary fw-semibold mt-1">
                                Your donation request has been accepted.  
                                An agent will be assigned shortly.
                            </div>

                        <% } else if(pendingDonations[i].status == "assigned") { %>
                            <div class="text-success fw-semibold mt-1">
                                Agent Assigned: 
                                <%= pendingDonations[i].agent.firstName + " " + pendingDonations[i].agent.lastName %>  
                                will collect the donation.
                            </div>
                        <% } %>
                    </div>

                    <!-- For Rejected -->
                    <% if(pendingDonations[i].status == "rejected") { %>
                        <div class="text-end mt-3">
                            <a class="btn btn-danger px-4" 
                               href="/donor/donation/deleteRejected/<%= pendingDonations[i]._id %>">
                                Okay
                            </a>
                        </div>
                    <% } %>

                </div>

            <% } %>

        </div>

    </div>
</main>
