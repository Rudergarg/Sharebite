<main>
    <%- include('../partials/donorSidebar') %>

    <div id="main-wrapper">

        <!-- Header -->
        <div class="bg-white shadow-sm p-3">
            <span class="me-3" id="sidebar-toggler-btn">
                <i class="fas fa-bars"></i>
            </span>
            <h5 class="m-0 color-theme d-inline-block">Previous Donations</h5>
        </div>

        <!-- Table Wrapper -->
        <div class="col col-sm-10 col-12 m-auto my-4">
            <div class="bg-white p-3 rounded-3 shadow-sm border" style="max-height: 75vh; overflow-y: auto;">

                <table class="table table-hover align-middle m-0">
                    <thead class="table-light border-bottom">
                        <tr class="text-center">
                            <th>#</th>
                            <th>Food Type</th>
                            <th>Quantity</th>
                            <th>Status</th>
                            <th>Cooking Time</th>
                            <th>Agent Assigned</th>
                            <th>Collection Time</th>
                        </tr>
                    </thead>

                    <tbody>
                        <% for(let i=0; i<previousDonations.length; i++) { %>
                            <tr class="text-center">
                                <th scope="row"><%= i+1 %></th>

                                <td><%= previousDonations[i].foodType %></td>
                                <td><%= previousDonations[i].quantity %></td>

                                <!-- Status Coloring -->
                                <td class="fw-semibold text-<%= previousDonations[i].status %>">
                                    <%= previousDonations[i].status %>
                                </td>

                                <td>
                                    <%= previousDonations[i].cookingTime.toLocaleString("en-IN", { 
                                        dateStyle: "medium", 
                                        timeStyle: "short" 
                                    }) %>
                                </td>

                                <td>
                                    <%= previousDonations[i].agent.firstName + " " + previousDonations[i].agent.lastName %>
                                </td>

                                <td>
                                    <%= previousDonations[i].collectionTime.toLocaleString("en-IN", { 
                                        dateStyle: "medium", 
                                        timeStyle: "short" 
                                    }) %>
                                </td>
                            </tr>
                        <% } %>
                    </tbody>
                </table>

            </div>
        </div>

    </div>
</main>
