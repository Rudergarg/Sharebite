<main>
    <%- include('../partials/adminSidebar') %>

    <div id="main-wrapper">

        <!-- Header -->
        <div class="bg-white shadow-sm p-3">
            <span class="me-3" id="sidebar-toggler-btn">
                <i class="fas fa-bars"></i>
            </span>
            <h5 class="m-0 color-theme d-inline-block">Assign Agent</h5>
        </div>

        <!-- Form -->
        <form action="/admin/donation/assign/<%= donation._id %>" 
              method="POST" 
              class="border m-4 my-3 p-4 bg-white rounded-2 shadow">

            <div class="row">
                <!-- Donor Name -->
                <div class="mb-4 col-sm-4">
                    <label for="donor" class="form-label">Donor Name</label>
                    <input 
                        type="text" 
                        class="form-control" 
                        id="donor"
                        value="<%= donation.donor.firstName + ' ' + donation.donor.lastName %>" 
                        disabled>
                </div>

                <!-- Address -->
                <div class="mb-4 col-sm-8">
                    <label for="address" class="form-label">Address</label>
                    <input 
                        type="text" 
                        class="form-control" 
                        id="address"
                        value="<%= donation.address %>" 
                        disabled>
                </div>
            </div>

            <!-- Agent Select -->
            <div class="mb-4">
                <label for="agent" class="form-label">Select Agent</label>
                <select name="agent" class="form-select" id="agent">
                    <% agents.forEach(agent => { %>
                        <option value="<%= agent._id %>">
                            <%= agent.firstName + " " + agent.lastName %>
                        </option>
                    <% }) %>
                </select>
            </div>

            <!-- Message -->
            <div class="mb-4">
                <label for="msg" class="form-label">Message to Agent</label>
                <textarea 
                    name="adminToAgentMsg" 
                    class="form-control" 
                    id="msg" 
                    placeholder="You can write a message here...">
                </textarea>
            </div>

            <!-- Submit -->
            <button type="submit" class="btn w-75 d-block m-auto mt-4">
                Assign
            </button>
        </form>

    </div>
</main>
