<main>
    <%- include('../partials/adminSidebar') %>

    <div id="main-wrapper">

        <!-- Page Header -->
        <div class="bg-white shadow-sm p-3 d-flex align-items-center">
            <span class="me-3" id="sidebar-toggler-btn"><i class="fas fa-bars"></i></span>
            <h5 class="m-0 color-theme">Donation Details</h5>
        </div>

        <!-- Donation Card -->
        <div class="container my-4">
            <div class="bg-white shadow-sm rounded-4 p-4 border mx-auto" style="max-width: 750px;">

                <!-- Donor Name -->
                <div class="mb-3">
                    <label class="fw-semibold text-secondary">Donor Name:</label>
                    <div class="fs-6"><%= donation.donor.firstName + " " + donation.donor.lastName %></div>
                </div>

                <!-- Food Type -->
                <div class="mb-3">
                    <label class="fw-semibold text-secondary">Food Type:</label>
                    <div><%= donation.foodType %></div>
                </div>

                <!-- Quantity -->
                <div class="mb-3">
                    <label class="fw-semibold text-secondary">Quantity:</label>
                    <div><%= donation.quantity %></div>
                </div>

                <!-- Cooking Time -->
                <div class="mb-3">
                    <label class="fw-semibold text-secondary">Time of Cooking:</label>
                    <div><%= donation.cookingTime.toLocaleString("en-IN", { dateStyle: "medium", timeStyle: "short" }) %></div>
                </div>

                <!-- Address -->
                <div class="mb-3">
                    <label class="fw-semibold text-secondary">Address to Collect:</label>
                    <div><%= donation.address %></div>
                </div>

                <!-- Phone -->
                <div class="mb-3">
                    <label class="fw-semibold text-secondary">Phone:</label>
                    <div><%= donation.phone %></div>
                </div>

                <!-- Donor Message -->
                <% if(donation.donorToAdminMsg != "") { %>
                    <div class="mb-3">
                        <label class="fw-semibold text-secondary">Message from Donor:</label>
                        <div class="bg-light p-2 rounded border ms-2">
                            <%= donation.donorToAdminMsg %>
                        </div>
                    </div>
                <% } %>

                <!-- Status -->
                <div class="mb-3">
                    <label class="fw-semibold text-secondary">Status:</label>
                    <div class="fw-bold text-<%= donation.status %>">
                        <%= donation.status %>
                    </div>
                </div>

                <!-- Assigned Agent -->
                <% if(donation.status == "assigned") { %>
                    <div class="mb-3">
                        <label class="fw-semibold text-secondary">Agent Assigned:</label>
                        <div><%= donation.agent.firstName + " " + donation.agent.lastName %></div>
                    </div>
                <% } %>

                <!-- Admin Message to Agent -->
                <% if(donation.status == "assigned" && donation.adminToAgentMsg != "") { %>
                    <div class="mb-3">
                        <label class="fw-semibold text-secondary">Your Message to Agent:</label>
                        <div class="bg-light p-2 rounded border ms-2">
                            <%= donation.adminToAgentMsg %>
                        </div>
                    </div>
                <% } %>

                <!-- Collection Time -->
                <% if(donation.status == "collected") { %>
                    <div class="mb-3">
                        <label class="fw-semibold text-secondary">Collection Time:</label>
                        <div><%= donation.collectionTime.toLocaleString("en-IN", { dateStyle: "medium", timeStyle: "short" }) %></div>
                    </div>
                <% } %>

                <!-- Action Buttons -->
                <div class="mt-4 d-flex gap-3">
                    <% if(donation.status == "pending") { %>
                        <a href="/admin/donation/accept/<%= donation._id %>" class="btn btn-theme">Accept</a>
                        <a href="/admin/donation/reject/<%= donation._id %>" class="btn btn-danger">Reject</a>

                    <% } else if(donation.status == "accepted") { %>
                        <a href="/admin/donation/assign/<%= donation._id %>" class="btn btn-theme">Assign Agent</a>
                    <% } %>
                </div>

            </div>
        </div>

    </div>
</main>
