<main class="bg-light min-vh-100">
	<%- include('../partials/agentSidebar') %>

	<div id="main-wrapper" class="p-3">

		<!-- Header -->
		<div class="bg-white shadow-sm p-3 rounded d-flex align-items-center">
			<span class="me-3" id="sidebar-toggler-btn">
				<i class="fas fa-bars fs-5"></i>
			</span>
			<h5 class="m-0 text-primary fw-bold">Previous Collections</h5>
		</div>

		<!-- Table Wrapper -->
		<div class="col col-sm-10 col-12 m-auto my-4 bg-white shadow-sm rounded p-0"
			 style="max-height: 75%; overflow: auto;">

			<table class="table table-hover m-0">

				<!-- Sticky Header -->
				<thead class="table-success" style="position: sticky; top:0; z-index:5;">
					<tr>
						<th>#</th>
						<th>Donor Name</th>
						<th>Address Collected</th>
						<th>Phone</th>
						<th class="text-center">Actions</th>
					</tr>
				</thead>

				<tbody>
					<% for(let i = 0; i < previousCollections.length; i++) { %>
					<tr class="align-middle">

						<!-- Index -->
						<th><%= i + 1 %></th>

						<!-- Donor Name -->
						<td class="fw-semibold">
							<%= previousCollections[i].donor.firstName + " " + previousCollections[i].donor.lastName %>
						</td>

						<!-- Address -->
						<td>
							<i class="fas fa-home me-1 text-secondary"></i>
							<%= previousCollections[i].address %>
						</td>

						<!-- Phone -->
						<td class="fw-semibold">
							<i class="fas fa-phone-alt me-1 text-secondary"></i>
							<%= previousCollections[i].phone %>
						</td>

						<!-- View Button -->
						<td class="text-center">
							<a href="/agent/collection/view/<%= previousCollections[i]._id %>"
							   class="btn btn-sm btn-outline-success">
								<i class="fas fa-eye me-1"></i> View
							</a>
						</td>

					</tr>
					<% } %>
				</tbody>
			</table>
		</div>

	</div>
</main>

<style>
	table tbody tr:hover {
		background: #f4fff7 !important;
		cursor: pointer;
	}

	.btn-outline-success:hover {
		color: white !important;
	}

	.table-hover tbody tr {
		transition: background 0.2s ease;
	}
</style>
