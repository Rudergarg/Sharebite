<main class="bg-light min-vh-100">
	<%- include('../partials/agentSidebar') %>

	<div id="main-wrapper" class="p-3">

		<!-- Header -->
		<div class="bg-white shadow-sm p-3 rounded d-flex align-items-center">
			<span class="me-3" id="sidebar-toggler-btn">
				<i class="fas fa-bars fs-5"></i>
			</span>
			<h5 class="m-0 text-primary fw-bold">Pending Collections</h5>
		</div>

		<!-- Table Container -->
		<div class="col col-sm-10 col-12 m-auto my-4 bg-white shadow-sm rounded p-0" 
			 style="max-height: 75%; overflow:auto;">

			<table class="table table-hover m-0">

				<!-- Sticky Header -->
				<thead class="table-primary" style="position: sticky; top:0; z-index:5;">
					<tr>
						<th>#</th>
						<th>Donor Name</th>
						<th>Pickup Address</th>
						<th>Phone</th>
						<th class="text-center">Actions</th>
					</tr>
				</thead>

				<tbody>
					<% for(let i = 0; i < pendingCollections.length; i++) { %>
					<tr class="align-middle">

						<!-- Index -->
						<th><%= i+1 %></th>

						<!-- Donor Name -->
						<td class="fw-semibold">
							<%= pendingCollections[i].donor.firstName + " " + pendingCollections[i].donor.lastName %>
						</td>

						<!-- Address + Google map link -->
						<td>
							<a href="https://www.google.com/maps/search/<%= pendingCollections[i].address %>" 
							   target="_blank"
							   class="text-decoration-none text-primary fw-semibold">
								<i class="fas fa-map-marker-alt me-1"></i>
								<%= pendingCollections[i].address %>
							</a>
						</td>

						<!-- Phone -->
						<td class="fw-semibold">
							<i class="fas fa-phone-alt me-1 text-secondary"></i>
							<%= pendingCollections[i].phone %>
						</td>

						<!-- Action Buttons -->
						<td class="text-center">
							<a href="/agent/collection/view/<%= pendingCollections[i]._id %>" 
							   class="btn btn-sm btn-outline-primary me-2">
								<i class="fas fa-eye me-1"></i> View
							</a>

							<a href="/agent/collection/collect/<%= pendingCollections[i]._id %>" 
							   class="btn btn-sm btn-success">
								<i class="fas fa-check-circle me-1"></i> Collect
							</a>
						</td>
					</tr>
					<% } %>
				</tbody>
			</table>
		</div>

	</div>
</main>

<style>
	table tbody tr:hover {
		background: #f7faff !important;
		cursor: pointer;
	}

	.btn-outline-primary:hover {
		color: white !important;
	}

	.table-hover tbody tr {
		transition: background 0.2s ease;
	}
</style>
